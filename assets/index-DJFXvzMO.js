(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const y of u)if(y.type==="childList")for(const b of y.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&o(b)}).observe(document,{childList:!0,subtree:!0});function p(u){const y={};return u.integrity&&(y.integrity=u.integrity),u.referrerPolicy&&(y.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?y.credentials="include":u.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function o(u){if(u.ep)return;u.ep=!0;const y=p(u);fetch(u.href,y)}})();function Ce(v){return v&&v.__esModule&&Object.prototype.hasOwnProperty.call(v,"default")?v.default:v}var Q={exports:{}};/*! dom-to-image-more 08-05-2025 */var be=Q.exports,le;function Se(){return le||(le=1,function(v,h){(p=>{let o=(()=>{let d=0;return{escape:function(e){return e.replace(/([.*+?^${}()|[\]/\\])/g,"\\$1")},isDataUrl:function(e){return e.search(/^(data:)/)!==-1},canvasToBlob:function(e){return e.toBlob?new Promise(function(t){e.toBlob(t)}):(t=>new Promise(function(r){var l=X(t.toDataURL().split(",")[1]),a=l.length,P=new Uint8Array(a);for(let D=0;D<a;D++)P[D]=l.charCodeAt(D);r(new Blob([P],{type:"image/png"}))}))(e)},resolveUrl:function(e,t){var r=document.implementation.createHTMLDocument(),l=r.createElement("base"),a=(r.head.appendChild(l),r.createElement("a"));return r.body.appendChild(a),l.href=t,a.href=e,a.href},getAndEncode:function(e){let t=f.impl.urlCache.find(function(r){return r.url===e});return t||(t={url:e,promise:null},f.impl.urlCache.push(t)),t.promise===null&&(f.impl.options.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime()),t.promise=new Promise(function(r){let l=f.impl.options.httpTimeout,a=new XMLHttpRequest;if(a.onreadystatechange=function(){if(a.readyState===4)if(300<=a.status)D?r(D):C(`cannot fetch resource: ${e}, status: `+a.status);else{let S=new FileReader;S.onloadend=function(){r(S.result)},S.readAsDataURL(a.response)}},a.ontimeout=function(){D?r(D):C(`timeout of ${l}ms occured while fetching resource: `+e)},a.responseType="blob",a.timeout=l,0<f.impl.options.useCredentialsFilters.length&&(f.impl.options.useCredentials=0<f.impl.options.useCredentialsFilters.filter(S=>0<=e.search(S)).length),f.impl.options.useCredentials&&(a.withCredentials=!0),f.impl.options.corsImg&&e.indexOf("http")===0&&e.indexOf(window.location.origin)===-1){var P=(f.impl.options.corsImg.method||"GET").toUpperCase()==="POST"?"POST":"GET";a.open(P,(f.impl.options.corsImg.url||"").replace("#{cors}",e),!0);let S=!1,E=f.impl.options.corsImg.headers||{},x=(Object.keys(E).forEach(function(i){E[i].indexOf("application/json")!==-1&&(S=!0),a.setRequestHeader(i,E[i])}),(i=>{try{return JSON.parse(JSON.stringify(i))}catch(A){C("corsImg.data is missing or invalid:"+A.toString())}})(f.impl.options.corsImg.data||""));Object.keys(x).forEach(function(i){typeof x[i]=="string"&&(x[i]=x[i].replace("#{cors}",e))}),a.send(S?JSON.stringify(x):x)}else a.open("GET",e,!0),a.send();let D;function C(S){console.error(S),r("")}f.impl.options.imagePlaceholder&&(P=f.impl.options.imagePlaceholder.split(/,/))&&P[1]&&(D=P[1])})),t.promise},uid:function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+d++},delay:function(e){return function(t){return new Promise(function(r){setTimeout(function(){r(t)},e)})}},asArray:function(e){var t=[],r=e.length;for(let l=0;l<r;l++)t.push(e[l]);return t},escapeXhtml:function(e){return e.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(e){return e!=="data:,"?new Promise(function(t,r){let l=document.createElementNS("http://www.w3.org/2000/svg","svg"),a=new Image;f.impl.options.useCredentials&&(a.crossOrigin="use-credentials"),a.onload=function(){document.body.removeChild(l),window&&window.requestAnimationFrame?window.requestAnimationFrame(function(){t(a)}):t(a)},a.onerror=P=>{document.body.removeChild(l),r(P)},l.appendChild(a),a.src=e,document.body.appendChild(l)}):Promise.resolve()},width:function(e){var t=c(e,"width");if(!isNaN(t))return t;var t=c(e,"border-left-width"),r=c(e,"border-right-width");return e.scrollWidth+t+r},height:function(e){var t=c(e,"height");if(!isNaN(t))return t;var t=c(e,"border-top-width"),r=c(e,"border-bottom-width");return e.scrollHeight+t+r},getWindow:n,isElement:m,isElementHostForOpenShadowRoot:function(e){return m(e)&&e.shadowRoot!==null},isShadowRoot:s,isInShadowRoot:g,isHTMLElement:function(e){return e instanceof n(e).HTMLElement},isHTMLCanvasElement:function(e){return e instanceof n(e).HTMLCanvasElement},isHTMLInputElement:function(e){return e instanceof n(e).HTMLInputElement},isHTMLImageElement:function(e){return e instanceof n(e).HTMLImageElement},isHTMLLinkElement:function(e){return e instanceof n(e).HTMLLinkElement},isHTMLScriptElement:function(e){return e instanceof n(e).HTMLScriptElement},isHTMLStyleElement:function(e){return e instanceof n(e).HTMLStyleElement},isHTMLTextAreaElement:function(e){return e instanceof n(e).HTMLTextAreaElement},isShadowSlotElement:function(e){return g(e)&&e instanceof n(e).HTMLSlotElement},isSVGElement:function(e){return e instanceof n(e).SVGElement},isSVGRectElement:function(e){return e instanceof n(e).SVGRectElement},isDimensionMissing:function(e){return isNaN(e)||e<=0}};function n(e){return e=e?e.ownerDocument:void 0,(e?e.defaultView:void 0)||window||p}function s(e){return e instanceof n(e).ShadowRoot}function g(e){return e!=null&&e.getRootNode!==void 0&&s(e.getRootNode())}function m(e){return e instanceof n(e).Element}function c(e,t){if(e.nodeType===k){let r=j(e).getPropertyValue(t);if(r.slice(-2)==="px")return r=r.slice(0,-2),parseFloat(r)}return NaN}})(),u=(()=>{let d=/url\((["']?)((?:\\?.)*?)\1\)/gm;return{inlineAll:function(c,e,t){return n(c)?Promise.resolve(c).then(s).then(function(r){let l=Promise.resolve(c);return r.forEach(function(a){l=l.then(function(P){return m(P,a,e,t)})}),l}):Promise.resolve(c)},shouldProcess:n,impl:{readUrls:s,inline:m,urlAsRegex:g}};function n(c){return c.search(d)!==-1}function s(c){for(var e,t=[];(e=d.exec(c))!==null;)t.push(e[2]);return t.filter(function(r){return!o.isDataUrl(r)})}function g(c){return new RegExp(`url\\((["']?)(${o.escape(c)})\\1\\)`,"gm")}function m(c,e,t,r){return Promise.resolve(e).then(function(l){return t?o.resolveUrl(l,t):l}).then(r||o.getAndEncode).then(function(l){var a=g(e);return c.replace(a,`url($1${l}$1)`)})}})(),y={resolveAll:function(){return b().then(function(d){return Promise.all(d.map(function(n){return n.resolve()}))}).then(function(d){return d.join(`
`)})},impl:{readAll:b}};function b(){return Promise.resolve(o.asArray(document.styleSheets)).then(function(n){let s=[];return n.forEach(function(g){var m=Object.getPrototypeOf(g);if(Object.prototype.hasOwnProperty.call(m,"cssRules"))try{o.asArray(g.cssRules||[]).forEach(s.push.bind(s))}catch(c){console.error("domtoimage: Error while reading CSS rules from "+g.href,c.toString())}}),s}).then(function(n){return n.filter(function(s){return s.type===CSSRule.FONT_FACE_RULE}).filter(function(s){return u.shouldProcess(s.style.getPropertyValue("src"))})}).then(function(n){return n.map(d)});function d(n){return{resolve:function(){var s=(n.parentStyleSheet||{}).href;return u.inlineAll(n.cssText,s)},src:function(){return n.style.getPropertyValue("src")}}}}let N={inlineAll:function d(n){if(!o.isElement(n))return Promise.resolve(n);return s(n).then(function(){return o.isHTMLImageElement(n)?H(n).inline():Promise.all(o.asArray(n.childNodes).map(function(g){return d(g)}))});function s(g){let m=["background","background-image"],c=m.map(function(e){let t=g.style.getPropertyValue(e),r=g.style.getPropertyPriority(e);return t?u.inlineAll(t).then(function(l){g.style.setProperty(e,l,r)}):Promise.resolve()});return Promise.all(c).then(function(){return g})}},impl:{newImage:H}};function H(d){return{inline:function(n){return o.isDataUrl(d.src)?Promise.resolve():Promise.resolve(d.src).then(n||o.getAndEncode).then(function(s){return new Promise(function(g){d.onload=g,d.onerror=g,d.src=s})})}}}let M={copyDefaultStyles:!0,imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1,useCredentialsFilters:[],httpTimeout:3e4,styleCaching:"strict",corsImg:void 0},f={toSvg:W,toPng:function(d,n){return $(d,n).then(function(s){return s.toDataURL()})},toJpeg:function(d,n){return $(d,n).then(function(s){return s.toDataURL("image/jpeg",(n?n.quality:void 0)||1)})},toBlob:function(d,n){return $(d,n).then(o.canvasToBlob)},toPixelData:function(d,n){return $(d,n).then(function(s){return s.getContext("2d").getImageData(0,0,o.width(d),o.height(d)).data})},toCanvas:$,impl:{fontFaces:y,images:N,util:o,inliner:u,urlCache:[],options:{}}},k=(v.exports=f,(typeof Node<"u"?Node.ELEMENT_NODE:void 0)||1),j=(p!==void 0?p.getComputedStyle:void 0)||(typeof window<"u"?window.getComputedStyle:void 0)||globalThis.getComputedStyle,X=(p!==void 0?p.atob:void 0)||(typeof window<"u"?window.atob:void 0)||globalThis.atob;function W(d,n){f.impl.util.getWindow(d);var s=n=n||{};s.copyDefaultStyles===void 0?f.impl.options.copyDefaultStyles=M.copyDefaultStyles:f.impl.options.copyDefaultStyles=s.copyDefaultStyles,f.impl.options.imagePlaceholder=(s.imagePlaceholder===void 0?M:s).imagePlaceholder,f.impl.options.cacheBust=(s.cacheBust===void 0?M:s).cacheBust,f.impl.options.corsImg=(s.corsImg===void 0?M:s).corsImg,f.impl.options.useCredentials=(s.useCredentials===void 0?M:s).useCredentials,f.impl.options.useCredentialsFilters=(s.useCredentialsFilters===void 0?M:s).useCredentialsFilters,f.impl.options.httpTimeout=(s.httpTimeout===void 0?M:s).httpTimeout,f.impl.options.styleCaching=(s.styleCaching===void 0?M:s).styleCaching;let g=[];return Promise.resolve(d).then(function(m){if(m.nodeType===k)return m;var c=m,e=m.parentNode,t=document.createElement("span");return e.replaceChild(t,c),t.append(m),g.push({parent:e,child:c,wrapper:t}),t}).then(function(m){return function c(e,t,r,l){let a=t.filter;if(e===I||o.isHTMLScriptElement(e)||o.isHTMLStyleElement(e)||o.isHTMLLinkElement(e)||r!==null&&a&&!a(e))return Promise.resolve();return Promise.resolve(e).then(P).then(D).then(function(i){return E(i,S(e))}).then(C).then(function(i){return x(i,e)});function P(i){return o.isHTMLCanvasElement(i)?o.makeImage(i.toDataURL()):i.cloneNode(!1)}function D(i){return t.adjustClonedNode&&t.adjustClonedNode(e,i,!1),Promise.resolve(i)}function C(i){return t.adjustClonedNode&&t.adjustClonedNode(e,i,!0),Promise.resolve(i)}function S(i){return o.isElementHostForOpenShadowRoot(i)?i.shadowRoot:i}function E(i,A){let q=z(A),F=Promise.resolve();if(q.length!==0){let L=j(U(A));o.asArray(q).forEach(function(R){F=F.then(function(){return c(R,t,L).then(function(T){T&&i.appendChild(T)})})})}return F.then(function(){return i});function U(L){return o.isShadowRoot(L)?L.host:L}function z(L){if(o.isShadowSlotElement(L)){let R=L.assignedNodes();if(R&&0<R.length)return R}return L.childNodes}}function x(i,A){return!o.isElement(i)||o.isShadowSlotElement(A)?Promise.resolve(i):Promise.resolve().then(q).then(F).then(U).then(z).then(function(){return i});function q(){function L(T,w){w.font=T.font,w.fontFamily=T.fontFamily,w.fontFeatureSettings=T.fontFeatureSettings,w.fontKerning=T.fontKerning,w.fontSize=T.fontSize,w.fontStretch=T.fontStretch,w.fontStyle=T.fontStyle,w.fontVariant=T.fontVariant,w.fontVariantCaps=T.fontVariantCaps,w.fontVariantEastAsian=T.fontVariantEastAsian,w.fontVariantLigatures=T.fontVariantLigatures,w.fontVariantNumeric=T.fontVariantNumeric,w.fontVariationSettings=T.fontVariationSettings,w.fontWeight=T.fontWeight}function R(T,w){let B=j(T);B.cssText?(w.style.cssText=B.cssText,L(B,w.style)):(V(t,T,B,r,w),r===null&&(["inset-block","inset-block-start","inset-block-end"].forEach(J=>w.style.removeProperty(J)),["left","right","top","bottom"].forEach(J=>{w.style.getPropertyValue(J)&&w.style.setProperty(J,"0px")})))}R(A,i)}function F(){let L=o.uid();function R(T){let w=j(A,T),B=w.getPropertyValue("content");if(B!==""&&B!=="none"){let se=function(){let he=`.${L}:`+T,pe=(w.cssText?ge:ye)();return document.createTextNode(he+`{${pe}}`);function ge(){return`${w.cssText} content: ${B};`}function ye(){return o.asArray(w).map(ve).join("; ")+";";function ve(Z){let we=w.getPropertyValue(Z),Ee=w.getPropertyPriority(Z)?" !important":"";return Z+": "+we+Ee}}};var J=se;let fe=i.getAttribute("class")||"",ie=(i.setAttribute("class",fe+" "+L),document.createElement("style"));ie.appendChild(se()),i.appendChild(ie)}}[":before",":after"].forEach(function(T){R(T)})}function U(){o.isHTMLTextAreaElement(A)&&(i.innerHTML=A.value),o.isHTMLInputElement(A)&&i.setAttribute("value",A.value)}function z(){o.isSVGElement(i)&&(i.setAttribute("xmlns","http://www.w3.org/2000/svg"),o.isSVGRectElement(i))&&["width","height"].forEach(function(L){let R=i.getAttribute(L);R&&i.style.setProperty(L,R)})}}}(m,n,null)}).then(n.disableEmbedFonts?Promise.resolve(d):oe).then(Y).then(function(m){n.bgcolor&&(m.style.backgroundColor=n.bgcolor),n.width&&(m.style.width=n.width+"px"),n.height&&(m.style.height=n.height+"px"),n.style&&Object.keys(n.style).forEach(function(e){m.style[e]=n.style[e]});let c=null;return typeof n.onclone=="function"&&(c=n.onclone(m)),Promise.resolve(c).then(function(){return m})}).then(function(m){let c=n.width||o.width(m),e=n.height||o.height(m);return Promise.resolve(m).then(function(t){return t.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(t)}).then(o.escapeXhtml).then(function(t){var r=(o.isDimensionMissing(c)?' width="100%"':` width="${c}"`)+(o.isDimensionMissing(e)?' height="100%"':` height="${e}"`);return`<svg xmlns="http://www.w3.org/2000/svg"${(o.isDimensionMissing(c)?"":` width="${c}"`)+(o.isDimensionMissing(e)?"":` height="${e}"`)}><foreignObject${r}>${t}</foreignObject></svg>`}).then(function(t){return"data:image/svg+xml;charset=utf-8,"+t})}).then(function(m){for(;0<g.length;){var c=g.pop();c.parent.replaceChild(c.child,c.wrapper)}return m}).then(function(m){return f.impl.urlCache=[],I&&(document.body.removeChild(I),I=null),O&&clearTimeout(O),O=setTimeout(()=>{O=null,_={}},2e4),m})}function $(d,n){return W(d,n=n||{}).then(o.makeImage).then(function(s){var g=typeof n.scale!="number"?1:n.scale,m=((e,t)=>{let r=n.width||o.width(e),l=n.height||o.height(e);return o.isDimensionMissing(r)&&(r=o.isDimensionMissing(l)?300:2*l),o.isDimensionMissing(l)&&(l=r/2),(e=document.createElement("canvas")).width=r*t,e.height=l*t,n.bgcolor&&((t=e.getContext("2d")).fillStyle=n.bgcolor,t.fillRect(0,0,e.width,e.height)),e})(d,g),c=m.getContext("2d");return c.msImageSmoothingEnabled=!1,c.imageSmoothingEnabled=!1,s&&(c.scale(g,g),c.drawImage(s,0,0)),m})}let I=null;function oe(d){return y.resolveAll().then(function(n){var s;return n!==""&&(s=document.createElement("style"),d.appendChild(s),s.appendChild(document.createTextNode(n))),d})}function Y(d){return N.inlineAll(d).then(function(){return d})}function V(d,n,s,g,m){let c=f.impl.options.copyDefaultStyles?((t,r)=>{var l,a=(C=>(t.styleCaching!=="relaxed"?C:C.filter((S,E,x)=>E===0||E===x.length-1)).join(">"))(r=(C=>{var S=[];do if(C.nodeType===k){var E=C.tagName;if(S.push(E),re.includes(E))break}while(C=C.parentNode);return S})(r));{if(_[a])return _[a];r=((C,S)=>{let E=C.body;do{var x=S.pop(),x=C.createElement(x);E.appendChild(x),E=x}while(0<S.length);return E.textContent="​",E})((l=(()=>{if(I)return I.contentWindow;S=document.characterSet||"UTF-8",C=(C=document.doctype)?(`<!DOCTYPE ${F(C.name)} ${F(C.publicId)} `+F(C.systemId)).trim()+">":"",(I=document.createElement("iframe")).id="domtoimage-sandbox-"+o.uid(),I.style.visibility="hidden",I.style.position="fixed",document.body.appendChild(I);var C,S,E=I,x="domtoimage-sandbox";try{return E.contentWindow.document.write(C+`<html><head><meta charset='${S}'><title>${x}</title></head><body></body></html>`),E.contentWindow}catch{}var i=document.createElement("meta");i.setAttribute("charset",S);try{var A=document.implementation.createHTMLDocument(x),q=(A.head.appendChild(i),C+A.documentElement.outerHTML);return E.setAttribute("srcdoc",q),E.contentWindow}catch{}return E.contentDocument.head.appendChild(i),E.contentDocument.title=x,E.contentWindow;function F(U){var z;return U?((z=document.createElement("div")).innerText=U,z.innerHTML):""}})()).document,r),l=((C,S)=>{let E={},x=C.getComputedStyle(S);return o.asArray(x).forEach(function(i){E[i]=i==="width"||i==="height"?"auto":x.getPropertyValue(i)}),E})(l,r);var P=r;do{var D=P.parentElement;D!==null&&D.removeChild(P),P=D}while(P&&P.tagName!=="BODY");return _[a]=l}})(d,n):{},e=m.style;o.asArray(s).forEach(function(t){var r,l,a,P;d.filterStyles&&!d.filterStyles(n,t)||(l=s.getPropertyValue(t),a=c[t],r=g?g.getPropertyValue(t):void 0,e.getPropertyValue(t))||(l!==a||g&&l!==r)&&(a=s.getPropertyPriority(t),r=e,l=l,a=a,P=0<=["background-clip"].indexOf(t=t),a?(r.setProperty(t,l,a),P&&r.setProperty("-webkit-"+t,l,a)):(r.setProperty(t,l),P&&r.setProperty("-webkit-"+t,l)))})}let O=null,_={},re=["ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","DETAILS","DIALOG","DD","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","MAIN","NAV","OL","P","PRE","SECTION","SVG","TABLE","UL","math","svg","BODY","HEAD","HTML"]})(be)}(Q)),Q.exports}var Te=Se();const Pe=Ce(Te),te=document.getElementById("hex"),ne=te.getBoundingClientRect().width,ce=ne/2,ue=ne/2,ae=ne*.4,xe=[{id:"nw",angle:210},{id:"n",angle:270},{id:"ne",angle:330},{id:"se",angle:30},{id:"s",angle:90},{id:"sw",angle:150},{id:"center",x:ce,y:ue}],G=["triangle","circle","diamond","none"],de=[["nw","n"],["n","ne"],["ne","se"],["se","s"],["s","sw"],["sw","nw"],["center","nw"],["center","n"],["center","ne"],["center","se"],["center","s"],["center","sw"]],K={},ee={},me={};function Le(v){const h=v*Math.PI/180;return{x:ce+ae*Math.cos(h),y:ue+ae*Math.sin(h)}}function Me(v){let h=v.x,p=v.y;if(typeof v.angle=="number"){const N=Le(v.angle);h=N.x,p=N.y}const o=document.createElement("div");o.className="point",o.style.left=`${h}px`,o.style.top=`${p}px`;let u=0;K[v.id]=G[u];const y=document.createElement("img");y.src=`/mythic-hex-site/${G[u]}.svg`,y.classList.toggle("triangle-adjust",G[u]==="triangle"),y.style.display=G[u]==="none"?"none":"block";const b=document.createElement("input");b.className="point-label",b.type="text",b.maxLength=1,b.value="1",b.style.display="block",o.appendChild(y),o.appendChild(b),te.appendChild(o),o.addEventListener("click",N=>{if(N.target===b)return;u=(u+1)%G.length,K[v.id]=G[u];const H=G[u];K[v.id]=H,y.src=`assets/${H}.svg`,y.classList.toggle("triangle-adjust",H==="triangle");const M=H!=="none";y.style.display=M?"block":"none",b.style.display=M?"block":"none",De()}),ee[v.id]={el:o,x:h,y:p}}xe.forEach(Me);function Ie(v,h){const p=document.createElement("div");p.className="line";function o(){const u=ee[v],y=ee[h],b=y.x-u.x,N=y.y-u.y,H=Math.sqrt(b*b+N*N),M=Math.atan2(N,b)*180/Math.PI;p.style.width=`${H}px`,p.style.left=`${u.x}px`,p.style.top=`${u.y}px`,p.style.transform=`rotate(${M}deg)`}return p.dataset.state="solid",p.addEventListener("click",()=>{const u=["solid","dotted","tick"],y=p.dataset.state,b=u[(u.indexOf(y)+1)%u.length];p.dataset.state=b,p.className="line "+(b==="solid"?"":b)}),o(),te.appendChild(p),p}de.forEach(([v,h])=>{const p=`${v}-${h}`;me[p]=Ie(v,h)});function De(){de.forEach(([v,h])=>{const p=me[`${v}-${h}`],o=K[v]!=="none"&&K[h]!=="none";p.style.display=o?"block":"none"})}document.getElementById("save-btn").addEventListener("click",()=>{const h=document.getElementById("hex").cloneNode(!0);h.style.width="800px",h.style.height="800px",h.style.position="fixed",h.style.top="-9999px",h.style.left="-9999px",h.style.zIndex="-1",h.style.transform="scale(1)",h.style.transformOrigin="top left",document.body.appendChild(h),Pe.toPng(h,{width:800,height:800,style:{transform:"scale(1)"}}).then(p=>{document.body.removeChild(h);const o=new Image;o.onload=()=>{const u=document.createElement("canvas");u.width=o.width,u.height=o.height;const y=u.getContext("2d");y.drawImage(o,0,0);const b=y.getImageData(0,0,u.width,u.height),{data:N,width:H,height:M}=b;let f=H,k=M,j=0,X=0;for(let V=0;V<M;V++)for(let O=0;O<H;O++){const _=(V*H+O)*4;N[_+3]>0&&(O<f&&(f=O),V<k&&(k=V),O>j&&(j=O),V>X&&(X=V))}const W=j-f+1,$=X-k+1,I=document.createElement("canvas");I.width=W,I.height=$,I.getContext("2d").drawImage(u,f,k,W,$,0,0,W,$);const Y=document.createElement("a");Y.download="hex-dungeon-cropped.png",Y.href=I.toDataURL("image/png"),Y.click()},o.src=p}).catch(p=>{console.error("Snapshot failed:",p),document.body.removeChild(h)})});
